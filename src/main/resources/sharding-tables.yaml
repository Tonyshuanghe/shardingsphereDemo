mode:
  type: Standalone
  repository:
    type: JDBC

dataSources:
  ## 使用 druid 连接池时用 url 代替 jdbcUrl
  ## druid  com.alibaba.druid.pool.DruidDataSource
  ## hikari com.zaxxer.hikari.HikariDataSource
  ds:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: dm.jdbc.driver.DmDriver
    jdbcUrl: jdbc:dm://192.168.10.240:5236/BDS_DB
    username: SYSDBA
    password: Bfz@1314.
    initial-size: 5
    max-active: 500
    min-idle: 10
    max-wait: 10000
    validationQuery: SELECT 1
  ds1:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: dm.jdbc.driver.DmDriver
    jdbcUrl: jdbc:dm://192.168.10.240:5236/sys
    username: SYSDBA
    password: Bfz@1314.
    initial-size: 5
    max-active: 500
    min-idle: 10
    max-wait: 10000
    validationQuery: SELECT 1
### 表名大写，防止找不到表名
rules:
  - !SINGLE
      defaultDataSource: ds
      tables:
        - ds.* # 加载指定数据源中的全部单表
        - dsSub.*
  - !SHARDING
    tables:
      T_TEST:
        actualDataNodes: ds.T_TEST
        tableStrategy:
          standard:
            shardingColumn: created_date
            shardingAlgorithmName: t-test-inline
      ALL_TABLES:
        actualDataNodes: ds1.all_tables
    shardingAlgorithms:
      t-test-inline:
        type: CLASS_BASED
        props:
          strategy: standard
          algorithmClassName: com.example.dmSupport.sharding.TimeShardingAlgorithm